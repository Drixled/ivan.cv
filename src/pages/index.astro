---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCardNew from '../components/ProjectCardNew.astro';
import Hero from '../components/Hero.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const projectMap = Object.fromEntries(projects.map(p => [p.id, p]));

// Manual order: neurelo, mictlan, rever, mediwallet
const neurelo = projectMap['neurelo'];
const mictlan = projectMap['mictlan'];
const rever = projectMap['rever'];
const mediwallet = projectMap['mediwallet'];
---

<BaseLayout>
  <div class="py-12">
    <!-- Row 1: Hero -->
    <div class="mb-16">
      <Hero />
    </div>

    <!-- Row 2: Neurelo (7-col) + MictlÃ¡n (5-col) -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-4">
      {neurelo && (
        <div class="fade-stagger md:col-span-7 h-[400px]" data-stagger="2">
          <ProjectCardNew
            title={neurelo.data.title}
            role={neurelo.data.role}
            period={neurelo.data.period}
            thumbnail={neurelo.data.thumbnail}
            slug={neurelo.id}
            bento={true}
          />
        </div>
      )}

      {mictlan && (
        <div class="fade-stagger md:col-span-5 h-[400px]" data-stagger="3">
          <ProjectCardNew
            title={mictlan.data.title}
            role={mictlan.data.role}
            period={mictlan.data.period}
            thumbnail={mictlan.data.thumbnail}
            slug={mictlan.id}
            bento={true}
          />
        </div>
      )}
    </div>

    <!-- Row 3: Rever (5-col) + Mediwallet (7-col) -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-4">
      {rever && (
        <div class="fade-stagger md:col-span-5 h-[400px]" data-stagger="4">
          <ProjectCardNew
            title={rever.data.title}
            role={rever.data.role}
            period={rever.data.period}
            thumbnail={rever.data.thumbnail}
            slug={rever.id}
            bento={true}
          />
        </div>
      )}

      {mediwallet && (
        <div class="fade-stagger md:col-span-7 h-[400px]" data-stagger="5">
          <ProjectCardNew
            title={mediwallet.data.title}
            role={mediwallet.data.role}
            period={mediwallet.data.period}
            thumbnail={mediwallet.data.thumbnail}
            slug={mediwallet.id}
            bento={true}
          />
        </div>
      )}
    </div>

    <!-- Contact card -->
    <a href="mailto:hello@ivan.cv" class="fade-stagger block bg-card hover:bg-card/80 transition-colors rounded-2xl p-4 flex items-center justify-between group" data-stagger="6">
      <span class="text-text-primary text-sm">Let's work together</span>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="text-text-secondary group-hover:text-text-primary transition-colors">
        <path d="M7 17L17 7M17 7H7M17 7V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</BaseLayout>
