---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCardNew from '../components/ProjectCardNew.astro';
import Hero from '../components/Hero.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout>
  <div class="px-6 py-12 max-w-3xl mx-auto w-full">
    <Hero />

    {sortedProjects.length > 0 && (
      <section>
        <div class="flex flex-col gap-6">
          {sortedProjects.map((project) => (
            <ProjectCardNew
              title={project.data.title}
              role={project.data.role}
              period={project.data.period}
              thumbnail={project.data.thumbnail}
              slug={project.id}
            />
          ))}
        </div>
      </section>
    )}
  </div>
</BaseLayout>
