---
import BaseLayout from './BaseLayout.astro';

interface Props {
  frontmatter: {
    title: string;
    description: string;
    company: string;
    period: string;
    role: string;
  };
  slug: string;
}

const { frontmatter, slug } = Astro.props;
---

<BaseLayout title={`${frontmatter.title} | Ivan Uruchurtu`} description={frontmatter.description}>
  <article class="py-12">
    <a
      href="/"
      class="text-text-secondary hover:text-text-primary transition-colors text-sm mb-8 inline-block"
    >
      &larr; Back
    </a>

    <header class="mb-12">
      <h1
        class="text-7xl font-display font-light text-text-primary mb-4 leading-[1.15]"
        style="font-variation-settings: 'opsz' 72, 'SOFT' 0, 'WONK' 1;"
      >
        {frontmatter.title}
      </h1>
      <p class="text-text-secondary">
        {frontmatter.company} &middot; {frontmatter.period}
      </p>
      <p class="text-text-secondary">{frontmatter.role}</p>
    </header>

    <div class="prose prose-invert prose-sm max-w-none project-content">
      <slot />
    </div>
  </article>
</BaseLayout>

<style>
  .project-content :global(img) {
    border-radius: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.03);
    cursor: zoom-in;
  }
</style>

<script>
  import mediumZoom from 'medium-zoom';

  function initZoom() {
    mediumZoom('.project-content img', {
      background: 'rgba(0, 0, 0, 0.9)',
      margin: 24,
    });
  }

  initZoom();
  document.addEventListener('astro:after-swap', initZoom);
</script>
